<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Function Docstrings · RadonKA.jl</title><meta name="title" content="Function Docstrings · RadonKA.jl"/><meta property="og:title" content="Function Docstrings · RadonKA.jl"/><meta property="twitter:title" content="Function Docstrings · RadonKA.jl"/><meta name="description" content="Documentation for RadonKA.jl."/><meta property="og:description" content="Documentation for RadonKA.jl."/><meta property="twitter:description" content="Documentation for RadonKA.jl."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">RadonKA.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">RadonKA.jl</a></li><li><a class="tocitem" href="../tutorial/">Simple Tutorial</a></li><li><a class="tocitem" href="../geometries/">Specifying different geometries and absorption</a></li><li><a class="tocitem" href="../benchmark/">Benchmark with Matlab and Astra</a></li><li class="is-active"><a class="tocitem" href>Function Docstrings</a><ul class="internal"><li><a class="tocitem" href="#Radon"><span>Radon</span></a></li><li><a class="tocitem" href="#Backproject-(adjoint-Radon)"><span>Backproject (adjoint Radon)</span></a></li><li><a class="tocitem" href="#Specifying-Geometries"><span>Specifying Geometries</span></a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Function Docstrings</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Function Docstrings</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/roflmaostc/RadonKA.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/roflmaostc/RadonKA.jl/blob/main/docs/src/functions.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h2 id="Radon"><a class="docs-heading-anchor" href="#Radon">Radon</a><a id="Radon-1"></a><a class="docs-heading-anchor-permalink" href="#Radon" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="RadonKA.radon" href="#RadonKA.radon"><code>RadonKA.radon</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">radon(I, θs; &lt;kwargs&gt;)</code></pre><p>Calculates the parallel Radon transform of the AbstractArray <code>I</code>. Intuitively, the <code>radon</code> sums array entries  of <code>I</code> along ray paths.</p><p>The first two dimensions are y and x. The third dimension is z, the rotational axis. <code>size(I, 1)</code> and <code>size(I, 2)</code> have to be equal. The Radon transform is rotated around the pixel <code>size(I, 1) ÷ 2 + 1</code>, so there is always an integer center pixel! Works either with a <code>AbstractArray{T, 3}</code> or <code>AbstractArray{T, 2}</code>.</p><p><code>θs</code> is a vector or range storing the angles in radians.</p><p>In principle, all backends of KernelAbstractions.jl should work but are not tested. CUDA and CPU arrays are actively tested. Both <code>radon</code> and <a href="#RadonKA.backproject"><code>backproject</code></a> are differentiable with respect to <code>I</code>.</p><p><strong>Keywords</strong></p><p><strong><code>μ=nothing</code> - Attenuated Radon Transform</strong></p><p>If <code>μ != nothing</code>, then the rays are attenuated with <code>exp(-μ * dist)</code> where <code>dist</code>  is the distance to the circular boundary of the field of view. <code>μ</code> is in units of pixel length. So <code>μ=1</code> corresponds to an attenuation of <code>exp(-1)</code> if propagated through one pixel. If <code>isnothing(μ)</code>, then the rays are not attenuated.</p><p><strong><code>geometry = RadonParallelCircle(-(size(img,1)-1)÷2:(size(img,1)-1)÷2)</code></strong></p><p>This corresponds to a parallel Radon transform.  See <code>?RadonGeometries</code> for a full list of geometries. There is also the very flexible <code>RadonFlexibleCircle</code>.</p><p>See also <a href="#RadonKA.backproject"><code>backproject</code></a>.</p><p><strong>Example</strong></p><p>The reason the sinogram has the value <code>1.41421</code> for the diagonal ray <code>π/4</code> is, that such a diagonal travels a longer distance through the pixel.</p><pre><code class="language-julia-repl hljs">julia&gt; arr = zeros((4,4)); arr[3,3] = 1;

julia&gt; radon(arr, [0, π/4, π/2])
3×3 view(::Array{Float64, 3}, :, :, 1) with eltype Float64:
 0.0  0.0      0.0
 1.0  1.41421  1.0
 0.0  0.0      0.0</code></pre><p><strong>Choose different detector</strong></p><pre><code class="language-julia-repl hljs">julia&gt; array = ones((6,6))
6×6 Matrix{Float64}:
 1.0  1.0  1.0  1.0  1.0  1.0
 1.0  1.0  1.0  1.0  1.0  1.0
 1.0  1.0  1.0  1.0  1.0  1.0
 1.0  1.0  1.0  1.0  1.0  1.0
 1.0  1.0  1.0  1.0  1.0  1.0
 1.0  1.0  1.0  1.0  1.0  1.0

julia&gt; radon(array, [0])
5×1 view(::Array{Float64, 3}, :, :, 1) with eltype Float64:
 1.0
 3.7320508075688767
 5.0
 3.7320508075688767
 1.0

julia&gt; radon(array, [0], geometry=RadonParallelCircle(6, -2:2))
5×1 view(::Array{Float64, 3}, :, :, 1) with eltype Float64:
 1.0
 3.7320508075688767
 5.0
 3.7320508075688767
 1.0

julia&gt; radon(array, [0], geometry=RadonParallelCircle(6, -2:2:2))
3×1 view(::Array{Float64, 3}, :, :, 1) with eltype Float64:
 1.0
 5.0
 1.0</code></pre><p><strong>Apply some weights on the rays</strong></p><pre><code class="language-julia-repl hljs">julia&gt; array = ones((6,6));

julia&gt; radon(array, [0], geometry=RadonParallelCircle(6, -2:2, [2,1,0,1,2]))
5×1 view(::Array{Float64, 3}, :, :, 1) with eltype Float64:
 2.0
 3.7320508075688767
 0.0
 3.7320508075688767
 2.0</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/roflmaostc/RadonKA.jl/blob/3ea45e6eda8f73615dfa009822fb8d3159eccccc/src/radon.jl#L20-L111">source</a></section></article><h2 id="Backproject-(adjoint-Radon)"><a class="docs-heading-anchor" href="#Backproject-(adjoint-Radon)">Backproject (adjoint Radon)</a><a id="Backproject-(adjoint-Radon)-1"></a><a class="docs-heading-anchor-permalink" href="#Backproject-(adjoint-Radon)" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="RadonKA.backproject" href="#RadonKA.backproject"><code>RadonKA.backproject</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">backproject(sinogram, θs; &lt;kwargs&gt;)</code></pre><p>Conceptually the adjoint operation of <a href="#RadonKA.radon"><code>radon</code></a>. Intuitively, the <code>backproject</code> smears rays back into the space. See also <a href="#RadonKA.radon"><code>radon</code></a>.</p><p>For filtered backprojection see <a href="#RadonKA.backproject_filtered"><code>backproject_filtered</code></a>.</p><p><strong>Example</strong></p><pre><code class="language-julia-repl hljs">julia&gt; arr = zeros((5,2)); arr[2,:] .= 1; arr[4, :] .= 1
2-element view(::Matrix{Float64}, 4, :) with eltype Float64:
 1.0
 1.0

julia&gt; backproject(arr, [0, π/2])
6×6 view(::Array{Float64, 3}, :, :, 1) with eltype Float64:
 0.0  0.0  0.0       0.0  0.0       0.0
 0.0  0.0  0.0       0.0  0.0       0.0
 0.0  0.0  2.0       1.0  2.0       0.732051
 0.0  0.0  1.0       0.0  1.0       0.0
 0.0  0.0  2.0       1.0  2.0       0.732051
 0.0  0.0  0.732051  0.0  0.732051  0.0

julia&gt; arr = ones((2,1)); 

julia&gt; backproject(arr, [0], geometry=RadonFlexibleCircle(10, [-3, 3], [0,0]))
10×10 view(::Array{Float64, 3}, :, :, 1) with eltype Float64:
 0.0  0.0  0.0       0.0       0.0        0.0      0.0        0.0       0.0       0.0
 0.0  0.0  0.0       0.0       0.0        0.0      0.0        0.0       0.0       0.0
 0.0  0.0  0.0       0.0       0.335172   1.49876  0.335172   0.0       0.0       0.0
 0.0  0.0  0.0       0.0       1.08455    0.0      1.08455    0.0       0.0       0.0
 0.0  0.0  0.0       0.0       1.08455    0.0      1.08455    0.0       0.0       0.0
 0.0  0.0  0.0       1.00552   0.0790376  0.0      0.0790376  1.00552   0.0       0.0
 0.0  0.0  0.0       1.08455   0.0        0.0      0.0        1.08455   0.0       0.0
 0.0  0.0  0.591307  0.493247  0.0        0.0      0.0        0.493247  0.591307  0.0
 0.0  0.0  0.700352  0.0       0.0        0.0      0.0        0.0       0.700352  0.0
 0.0  0.0  0.0       0.0       0.0        0.0      0.0        0.0       0.0       0.0</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/roflmaostc/RadonKA.jl/blob/3ea45e6eda8f73615dfa009822fb8d3159eccccc/src/backproject.jl#L10-L49">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="RadonKA.backproject_filtered" href="#RadonKA.backproject_filtered"><code>RadonKA.backproject_filtered</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">backproject_filtered(sinogram, θs; 
                        geometry, μ, filter)</code></pre><p>Reconstruct the image from the <code>sinogram</code> using the filtered backprojection algorithm.</p><ul><li><code>filter=nothing</code>: The filter to be applied in Fourier space. If <code>nothing</code>, a ramp filter is used. <code>filter</code> should be a 1D array of the same length as the sinogram.</li></ul><p>See <a href="#RadonKA.radon"><code>radon</code></a> for the explanation of the keyword arguments</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/roflmaostc/RadonKA.jl/blob/3ea45e6eda8f73615dfa009822fb8d3159eccccc/src/backproject_filtered.jl#L3-L12">source</a></section></article><h2 id="Specifying-Geometries"><a class="docs-heading-anchor" href="#Specifying-Geometries">Specifying Geometries</a><a id="Specifying-Geometries-1"></a><a class="docs-heading-anchor-permalink" href="#Specifying-Geometries" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="RadonKA.RadonGeometry" href="#RadonKA.RadonGeometry"><code>RadonKA.RadonGeometry</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">abstract type RadonGeometry end</code></pre><p>Abstract supertype for all geometries which are supported by <code>radon</code> and <code>backproject</code>.</p><p>List of geometries:</p><ul><li><a href="#RadonKA.RadonParallelCircle"><code>RadonParallelCircle</code></a></li><li><a href="#RadonKA.RadonFlexibleCircle"><code>RadonFlexibleCircle</code></a></li></ul><p>See <a href="#RadonKA.radon"><code>radon</code></a> and <a href="#RadonKA.backproject"><code>backproject</code></a> how to apply.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/roflmaostc/RadonKA.jl/blob/3ea45e6eda8f73615dfa009822fb8d3159eccccc/src/geometry.jl#L3-L13">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="RadonKA.RadonParallelCircle" href="#RadonKA.RadonParallelCircle"><code>RadonKA.RadonParallelCircle</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">RadonParallelCircle(N, in_height, weights)</code></pre><ul><li><p><code>N</code> is the size of the first and second dimension of the input array for <code>radon</code>.</p></li><li><p><code>in_height</code> is a vector or a range indicating the positions of the detector with respect to the midpoint which is located at <code>N ÷ 2 + 1</code>. The rays travel along straight parallel paths through the array.</p></li></ul><p>For example, for an array of size <code>N=10</code> the default definition is: <code>RadonParallelCircle(10, -4:4)</code> So the resulting sinogram has the shape: <code>(9, length(angles), size(array, 3))</code>.</p><ul><li><code>weights</code> can weight each of the rays with different strength. Per default <code>weights = 0 .* in_height .+ 1</code></li></ul><p>See <a href="#RadonKA.radon"><code>radon</code></a> and <a href="#RadonKA.backproject"><code>backproject</code></a> how to apply.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/roflmaostc/RadonKA.jl/blob/3ea45e6eda8f73615dfa009822fb8d3159eccccc/src/geometry.jl#L16-L29">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="RadonKA.RadonFlexibleCircle" href="#RadonKA.RadonFlexibleCircle"><code>RadonKA.RadonFlexibleCircle</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">RadonFlexibleCircle(N, in_height, out_height, weights)</code></pre><ul><li><code>N</code> is the size of the first and second dimension of the input for <code>radon</code>.</li><li><code>in_height</code> is a vector or range indicating the vertical positions of the rays entering the circle with respect to the midpoint which is located at <code>N ÷ 2 + 1</code>.</li><li><code>out_height</code> is a vector or range indicating the vertical positions of the rays exiting the circle with respect to the midpoint which is located at <code>N ÷ 2 + 1</code>.</li></ul><p>One definition could be: <code>RadonFlexibleCircle(10, -4:4, zeros((9,)))</code> It would describe rays which enter the circle at positions <code>-4:4</code> but all of them would focus at the position 0 when leaving the circle. This is an extreme form of fan beam tomography.</p><ul><li><code>weights</code> can weight each of the rays with different strength. Per default <code>weights = 0 .* in_height .+ 1</code></li></ul><p>See <a href="#RadonKA.radon"><code>radon</code></a> and <a href="#RadonKA.backproject"><code>backproject</code></a> how to apply.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/roflmaostc/RadonKA.jl/blob/3ea45e6eda8f73615dfa009822fb8d3159eccccc/src/geometry.jl#L46-L61">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../benchmark/">« Benchmark with Matlab and Astra</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="auto">Automatic (OS)</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.2.1 on <span class="colophon-date" title="Saturday 10 February 2024 14:07">Saturday 10 February 2024</span>. Using Julia version 1.10.0.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
